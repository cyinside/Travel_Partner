!function(){"use strict";var u=!0,t="_MeiTuanALogObject",f=1,r="dianping_nova",m="waimai",_="group",c="demo",g="4.8.2",y="lxcuid",b="uuid",w="msid",x="cityid",A="utm",S="uid",k="userid",q="dpid",O="appnm",s="union_id",d="pd_data",I=/^(([^? \r\n]*)\?)?([^?# \r\n]+)(#\S+)?$/,j=setTimeout,v=clearTimeout,l=1,o=2,p=3,h=4,i=5,a=6,e=20,D=7;function E(n){var t=n;return n&&n.code&&(t=n.code),t===l?"E_TIME_OUT":t===o?"E_NO_JSBRIDGE":t===p?"E_KNB_FAIL":t===h?"E_KNB_CB_FAIL":t===i?"E_KNB_NOT_EXIST":t===e?"ERR_PARAMS":t===a?"E_KNB_METHOD_NOT_SUPPORT":"unknown error: "+t}var C=200,N=100,F=500,T=600,L=-1,V="PV",M="PD",R="MC",P="SC",B="MV",U="MVL",Q="ME",K="BO",$="BP",J="event_type",X="val_act",z="val_cid",H="index",W="element_id",Z="pageView",G="systemCheck",Y="moduleClick",nn="order",tn="order_id",en=1e3,rn=2,an=0,on=-1,un=0,cn=1,sn=10080,fn=1576800,dn=30,ln="_lx_utm",vn="_lxsdk",pn="_lxsdk_cuid",hn="_lxsdk_dpid",gn="_lxsdk_s",mn="latlng",_n="msid",yn="ms",bn="category",wn="c",xn="login_type",Sn="lt",kn="locate_city_id",qn="lci",On="sdk_ver",An="sv",In="lxcuid",jn="lxid",Dn="val_lab",En="val_bid",Cn="val_val",Nn="sf",Fn="__$lx_beacon_",Tn={category:u,union_id:u,lxcuid:u,app:u,sdk_ver:u,appnm:u,ch:u,lch:u,ct:u,did:u,dm:u,ua:u,msid:u,uuid:u,lat:u,log:u,net:u,os:u,idfa:u,pushid:u,subcid:u,mac:u,imsi:u,uid:u,logintype:u,cityid:u,apn:u,mno:u,pushSetting:u,wifi:u,bht:u,ip:u,vendorid:u,geohash:u,dtk:u,sns:u,android_id:u,version_code:u,brand:u,utm:u},Ln="post",Vn="validation",Mn="__lx"+Vn,Rn=".sankuai.com",Pn="report.meituan.com",Bn="wreport.meituan.net",Un=function(){};function n(){return window}function Qn(){return n().XMLHttpRequest}var Kn,$n,Jn=(Kn=Qn(),$n=Kn&&"withCredentials"in new Kn,function(){return $n}),Xn=/__lxvalidation=([\w.]+)/i,zn=10,Hn=!1,Wn=void 0,Zn=void 0,Gn={};function Yn(n){var t,e="v2/api/"+Vn+"/validate",r="validate-ocean"+Rn,i=0===kt.protocol.indexOf("http:")?"http:":"https:",a=i+"//"+n+"/",o=kt.search.match(Xn)||[],u=function(){var n=Zt.get(Mn);if(n){var t=n.split("|");return{mis:t[0],env:t[1]||""}}return n||{}}();(t=o&&o[1]||u.mis||"")&&(Zt.set(Mn,t+"|",zn),a=i+"//"+r+"/"+e+"?mis="+t);return a}var nt={pageValLab:null,pageEnv:null,use_post:!1,cid:null,appnm:null,quit:null,useQuickReport:!1,onWebviewAppearAutoPV:!0,nativeSDKVer:null},tt=[];nt.on=function(n,t){tt.push({name:n,fn:t})};var et={MVL:!(nt.emit=function(r,i,a,o,u){Xt.each(tt,function(n){var t=n.name,e=n.fn;t===r&&e(i,a,o,u)})}),QC:!1,getReqId:!1};function rt(n){return!!et[n]}function it(n,t){Qt.isStr(n)&&(Gn[n]=t)}function at(n){Hn=n}function ot(){return Hn===f}var ut=void 0;var ct=an;function st(){return ct}function ft(n){(function(){if(jt!==ut)return ut;var n=qt.getElementsByTagName("meta");return ut="off"===Yt(n,"lx:native-report")})()||(ct=n)}var dt=!1;function lt(n){dt=!!n}var vt=5e3,pt=50,ht={MVL:{}},gt=void 0,mt=void 0;function _t(n,t,e,r){r=r||{};var i=t.category,a=e.req_id,o=e.val_cid,u=e.val_bid,c=r.tag;if(ht[n]&&Qt.isStr(n)&&Qt.isStr(i)&&Qt.isStr(a)&&Qt.isStr(o)&&Qt.isStr(u)){var s=i+"_"+a+"_"+o+"_"+u,f=ht[n];Qt.isObj(f[s])||(f[s]={env:Qt.extend(!0,{},t),evs:e,lab:[]}),Qt.isObj(c)&&(f[s].evs.tag=c);var d=Qt.extend(!0,e.val_lab,{_seq:e.seq,_tm:e.tm});f[s].lab.push(d),function(){var n=0;for(var t in ht){var e=ht[t];for(var r in e){var i=e[r].lab;n+=i.length||0}}pt<n&&wt()}()}}function yt(n,t){var e=(t||{}).withUnload,r=ht[n];if(Qt.isObj(r)){var i=[];for(var a in r){var o=r[a],u=!1;if(o.lab&&o.lab.length){var c=o.env,s=o.evs,f={mv_list:o.lab,custom:{_withUnload:!!e}};s.val_lab=f;for(var d=0,l=i.length;d<l;d++){var v=i[d];if(!bt(v,c)){v.evs.push(s),u=!0;break}}u||(c.evs=[s],i.push(c))}}i.length&&mt.send(i),ht[n]={}}}function bt(n,t){var e=0,r=0;for(var i in n)n.hasOwnProperty(i)&&e++;for(var a in t)t.hasOwnProperty(a)&&r++;var o=r<e?n:t,u=e<=r?n:t;for(var c in o){if(!(-1<"evs|".indexOf(c+"|")))if(Qt.isObj(o[c])&&Qt.isObj(u[c])){if(bt(o[c],u[c]))return!0}else if(o[c]!==u[c])return!0}return!1}function wt(n){var t=(n||{}).withUnload;for(var e in ht)yt(e,{withUnload:t})}j(function n(){clearTimeout(gt);try{wt()}catch(n){}finally{st()===an?gt=j(n,vt):clearTimeout(gt)}},100);var xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},St=n(),kt=location,qt=document,Ot=qt.domain,At=navigator,It=At.userAgent.toString(),jt=void 0,Dt=Array.prototype,Et=Object.prototype,Ct=decodeURIComponent,Nt=encodeURIComponent,Ft=Pt(),Tt=Et.toString,Lt=Et.hasOwnProperty;function Vt(){}function Mt(n){return void 0===n?"undefined":xt(n)}function Rt(n,t){return Mt(n)===t}function Pt(){return+new Date}function Bt(){return Math.random()}function Ut(n){return Rt(n,"number")}var Qt={};function Kt(n,e,r){var i=void 0,a=!0===n;return a||(r=e,e=n),e&&Qt.isObj(e)||(e={}),r&&Qt.isObj(r)||(r={}),Xt.each(r,function(n,t){a&&Qt.isObj(r[t])?(i=e[t],e[t]=Qt.isObj(i)?i:{},Kt(a,e[t],r[t])):e[t]=r[t]}),e}Qt.trim=function(n){return n.replace(/^[\s\uFEFF\xA0\u3000]+|[\s\uFEFF\xA0\u3000]+$/g,"")},Qt.now=Pt,Qt.rnd=Bt,Qt.hasOwn=function(n,t){return Lt.call(n,t)},Qt.extend=Kt;var $t=function(n){return n&&"[object Object]"===Tt.call(n)};Qt.isObj=$t;var Jt=function(n){return Rt(n,"string")};Qt.isStr=Jt,Qt.isFunc=function(n){return Rt(n,"function")},Qt.attr=function(n,t){return n.getAttribute(t)},Qt.parseQuery=function(n){var i={};if(n){var t=n.replace(I,function(n,t,e,r){return r||""}).split("&");return Xt.each(t,function(n){var t=n.split("="),e=t[0],r=t[1]||"";e&&!Lt.call(i,e)&&(i[e]=Ct(r))}),i}},Qt.stringifyQuery=function(n){var r=[];return Qt.isObj(n)&&Xt.each(n,function(n,t){var e;Qt.isFunc(n)||(jt!==n&&((e=n)||!Rt(e,"object"))||(n=n||""),r.push(Nt(t)+"="+Nt(n)))}),r.join("&")},Qt.genReqId=function(){return""+1e3*Pt()+parseInt(1e3*Bt())},Qt.run=function(n,t){zt(n)?Xt.each(n,t):t(n)},Qt.on=function(n,t,e){n.addEventListener?n.addEventListener(t,e,!1):n.attachEvent&&n.attachEvent("on"+t,e)},Qt.off=function(n,t,e){n.removeEventListener?n.removeEventListener(t,e,!1):n.detachEvent&&n.detachEvent("on"+t,e)};var Xt={isArray:function(n){return"[object Array]"===Tt.call(n)}},zt=function(n){if(!n)return!1;var t=n.length;return!!Xt.isArray(n)||!!(n&&Ut(t)&&0<=t)&&(!Qt.isObj(n)||(!(1<t)||t-1 in n))};Xt.isArrayLike=zt,Xt.find=function(e,r,i){var a=void 0;return zt(e)&&Xt.each(e,function(n,t){if(!0===r.call(i,n,t,e))return a=n,!1}),a},Xt.filter=function(e,r,i){var a=[];return zt(e)&&Xt.each(e,function(n,t){r.call(i,n,t,e)&&a.push(n)}),a},Xt.toArray=function(n,t,e){var r=[];return zt(n)&&Xt.each(n,function(n){r.push(t?t.call(e,n):n)},e),r};var Ht=function(n,t,e){if(n){var r=void 0,i=void 0,a=void 0;if(zt(n))for(i=0,a=n.length;i<a&&!1!==t.call(e,n[i],i,n);i++);else for(r in n)if(Qt.hasOwn(n,r)&&!1===t.call(e,n[r],r,n))break}};Xt.each=Ht;var Wt=function(n,t,e){if(n){for(var r=[],i=0,a=n.length;i<a;i++){var o=t.call(e,n[i],i,n);r.push(o)}return r}};Xt.slice=function(n,t,e){return Dt.slice.call(Xt.toArray(n),t,e)},Xt.reduce=function(n,t){if(zt(n)&&Qt.isFunc(t)){var e=n,r=e.length>>>0,i=0,a=void 0,o=arguments;if(3===o.length)a=o[2];else{for(;i<r&&!(i in e);)i++;if(r<=i)return;a=e[i++]}for(;i<r;)i in e&&(a=t(a,e[i],i,e)),i++;return a}};var Zt={};function Gt(n){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e=void 0,r=void 0,i=void 0,a=void 0,o=void 0,u=0,c=0,s="",f=[];if(!n)return n;for(n=function(n){n=(n+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n");var t="",e=void 0,r=void 0,i=0,a=void 0;for(e=r=0,i=n.length,a=0;a<i;a++){var o=n.charCodeAt(a),u=null;o<128?r++:u=127<o&&o<2048?String.fromCharCode(o>>6|192,63&o|128):String.fromCharCode(o>>12|224,o>>6&63|128,63&o|128),null!==u&&(e<r&&(t+=n.substring(e,r)),t+=u,e=r=a+1)}e<r&&(t+=n.substring(e,n.length));return t}(n);e=(o=n.charCodeAt(u++)<<16|n.charCodeAt(u++)<<8|n.charCodeAt(u++))>>18&63,r=o>>12&63,i=o>>6&63,a=63&o,f[c++]=t.charAt(e)+t.charAt(r)+t.charAt(i)+t.charAt(a),u<n.length;);switch(s=f.join(""),n.length%3){case 1:s=s.slice(0,-2)+"==";break;case 2:s=s.slice(0,-1)+"="}return s}function Yt(n,t){var e=void 0,r=Xt.find(n,function(n){return Qt.attr(n,"name")===t});return r&&(e=Qt.attr(r,"content")),e}function ne(){var n=St[t];return St[n]}Zt.del=function(n,t){var e=n+"=;path=/;domain="+t,r=new Date;return r.setFullYear(1970),e+=";expires="+r.toUTCString(),qt.cookie=e,!0},Zt.get=function(n){var t=qt.cookie.match(new RegExp("(?:^|;)\\s*"+n+"=([^;]+)"));return Ct(t?t[1]:"")},Zt.set=function(n,t,e,r){r=r||qt.domain;var i=void 0,a=void 0,o=void 0,u=n+"="+Nt(t)+";path=/;domain="+r;jt===e||isNaN(e)||(i=new Date,a=60*parseInt(e,10)*1e3,o=i.getTime()+a,i.setTime(o),u+=";expires="+i.toUTCString());try{return qt.cookie=u,!0}catch(n){return!1}},Zt.top=function(n,t,e){var r=qt.domain,i=r.split("."),a=i.length,o=a-1,u=void 0,c=!1;for(t=""+t;!c&&0<=o&&(r=i.slice(o,a).join("."),Zt.set(n,t,e,r),u=Zt.get(n),jt!==u&&(c=u===t),o--,!c););},Zt.del=function(n){return Zt.top(n,"",-100)};var te,ee=(te=void 0,{update:function(n){te=n},get:function(){return te}});function re(n){var t={duration:function(n){var t=void 0,e=ee.get(),r=Pt();if(n&&e)t=e,ee.update(r);else{var i=ne(),a=St.performance&&St.performance.timing;(t=a&&a.requestStart)||(t=i?i.l:Ft),ee.update(r)}return r-t}(!0===n)},e=void 0,r=nt.quit;return Qt.isFunc(r)&&(e=r()||{}),t=Qt.extend(t,e||{})}function ie(n,t){t[tn]}var ae=0;function oe(n,t){var e=/^((\d+\.)+\d+).*$/;if("string"!==Mt(n)||"string"!==Mt(t))return NaN;if(!e.test(n)||!e.test(t))return NaN;for(var r=n.replace(e,"$1").split("."),i=t.replace(e,"$1").split("."),a=0,o=Math.max(r.length,i.length);a<o;a++){if(!r[a]||!i[a])(!r[a]&&r||!i[a]&&i).push("0");var u=r[a].toString().length,c=i[a].toString().length;if(u!==c){var s=c<u?i:r;s[a]=Array(Math.abs(u-c)+1).join("0")+s[a].toString()}}var f=parseInt(r.join("")),d=parseInt(i.join(""));return f==d?0:d<f?1:-1}function ue(e,r,i,a,o,u,c){return function(n){if(!e){e=!0;try{if(r&&new Date-i<50)return;if(a)return;if(a=!1,!c()){var t=re();o("pageDisappear",t,{shouldStore:!0})}wt({withUnload:!0})}catch(n){}u&&u(n)}}}var ce=4,se="",fe=function(n){ce=n},de=function(){return se&&3===ce},le=function(n){se=n},ve=function(){return se},pe=It,he=[{n:c,r:/lingxi\/demo\/\d+/i,v:pe},{n:r,r:/dp\/com\.dianping\.[\w.]+\/([\d.]+)/i,v:pe},{n:m,r:/\bmeituanwaimai-c\/\d+\./i,v:pe},{n:"moviepro",r:/\bmoviepro/i,v:pe},{n:"movie",r:/\bmaoyan\b/i,v:pe},{n:_,r:/\bmeituan \d+|meituangroup\/\d+\./i,v:pe}],ge=/android/i.test(pe),me="",_e=ge,ye=!1,be=!1,we="www",xe=!1;if(/\bandroid|mobile\b|\bhtc\b/i.test(pe)){we="i",_e=!0,Xt.each(he,function(n){if(n.r.test(n.v))return me=n.n,!1}),/\btitans(no){0,1}x\b/i.test(pe)&&(ye=!0);var Se=/iphone/i.test(pe),ke=/ipad/i.test(pe);(Se||ke)&&(be=!0),me&&(Se?we="iphone":/android/i.test(pe)?we="android":ke&&(we="ipad"))}else{var qe=pe.match(/(msie) (\d+)|Trident\/(d+)/i);qe&&(xe=!0,qe&&parseInt(qe[2],10))}var Oe=St.screen.width+"*"+St.screen.height,Ae=ye||/ knb\/\d+/i.test(It),Ie=function(){var n=St.KNB;return _e&&Ae&&n&&n.isApiSupported},je=It.replace(/^.*TitansX\/([\d.]+)\s.*$/i,"$1"),De=A+"_source",Ee=A+"_medium",Ce=A+"_term",Ne=A+"_campaign",Fe=A+"_content",Te=void 0,Le=!1;function Ve(n){if(!n)return jt;var e=jt,r=/^utm_(source|medium|term|content|campaign)$/;return Xt.each(n,function(n,t){r.test(t)&&(!e&&(e={}),e[t]=n)}),e}function Me(n){if(n){Te=n;var t=Qt.stringifyQuery(n);return Zt.del(ln,Ot),Zt.top(ln,t,sn,Ot),!0}return!1}function Re(n,t){var a,e,r,i,o;return(!Te&&!Le||n)&&(n=n||kt.href,t=t||qt.referrer,o=n,(Te=Ve(Qt.parseQuery(o))||function(n){var t=jt,e=n.match(/^[\w-]+:\/\/([^/]+)(?:\/([^?]+)?)?/),o=e&&e[1];if(o){var u=Qt.parseQuery(n),r="daum:q eniro:search_word naver:query pchome:q images.google:q google:q yahoo:p msn:q bing:q aol:query aol:q lycos:q lycos:query ask:q cnn:query virgilio:qs baidu:wd baidu:word alice:qs yandex:text najdi:q seznam:q rakuten:qt biglobe:q goo.ne:MT search.smt.docomo:MT onet:qt onet:q kvasir:q terra:query rambler:query conduit:q babylon:q search-results:q avg:q comcast:q incredimail:q startsiden:q go.mail.ru:q centrum.cz:q 360.cn:q sogou:query tut.by:query globo:q ukr:q so.com:q haosou.com:q auone:q m.baidu:word wap.baidu:word baidu:word Baidu:bs www.soso:w wap.soso:key www.sogou:query wap.sogou:keyword m.so:q m.sogou:keyword so.com:pq youdao:q sm.cn:q sm.cn:keyword haosou:q".split(" "),c="",s="";Xt.each(r,function(n){var t=n.split(":"),e=t[0],r=t[1],i=u[r],a=-1<e.indexOf(".")?e:"."+e+".";if(-1<o.indexOf(a.toLowerCase())&&(s=e,c=i))return!1}),s&&((t={})[De]=s,t[Ee]="organic",c&&(t[Ce]=c))}return t}(t))?Me(Te):(i=Zt.get(ln),Te=I.test(i)?Ve(Qt.isStr(i)?Qt.parseQuery(i):null):Te),Te||(a=void 0,e=Zt.get("__utmz"),(r=e&&e.match(/(utmc(tr|sr|cn|md|ct))=([^|()]+)/g))&&Xt.each(r,function(n){var t=n.split("="),e=t[0],r=void 0,i=t[1]||"";"utmcsr"===e?r=De:"utmccn"===e?r=Ne:"utmcmd"===e?r=Ee:"utmcct"===e?r=Fe:"utmctr"===e&&(r=Ce),r&&((a=a||{})[r]=i)}),Me(Te=a)),Le=u),Te}var Pe,Be,Ue,Qe,Ke=St.JSON;Ke||(Ke={parse:function(n){return new Function("return ("+n+")")()},stringify:(Pe=Xt.isArray,Be={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"},Ue=function(n){return Be[n]||"\\u"+(n.charCodeAt(0)+65536).toString(16).substr(1)},Qe=/[\\"\u0000-\u001F\u2028\u2029]/g,function n(t){if(null==t)return"null";if(Rt(t,"number"))return isFinite(t)?t.toString():"null";if(Rt(t,"boolean"))return t.toString();if(Rt(t,"object")){if("function"===Mt(t.toJSON))return n(t.toJSON());if(Pe(t)){for(var e="[",r=0;r<t.length;r++)e+=(r?", ":"")+n(t[r]);return e+"]"}if(Qt.isObj(t)){var i=[];for(var a in t)t.hasOwnProperty(a)&&i.push(n(a)+": "+n(t[a]));return"{"+i.join(", ")+"}"}}return'"'+t.toString().replace(Qe,Ue)+'"'})});var $e=Ke,Je="__lxsdk_",Xe=St.localStorage;function ze(n){return Je+n}function He(){return{length:0,_data:{},setItem:function(n,t){return this.length++,this._data[n]=String(t)},getItem:function(n){return this._data.hasOwnProperty(n)?this._data[n]:jt},removeItem:function(n){return this.length--,delete this._data[n]},clear:function(){return this.length=0,this._data={}},key:function(n){var t=[],e=this._data;return Xt.each(e,function(n){Qt.hasOwn(e,n)&&t.push(n)}),t[n]}}}var We={get:function(n){n=ze(n);var t=Xe.getItem(n);return t=jt!==t?$e.parse(t):t},set:function(n,t){return We.del(n),Xe.setItem(ze(n),$e.stringify(t))},keys:function(){for(var n=[],t=void 0,e=0;e<Xe.length;e++)0===(t=Xe.key(e)).indexOf(Je)&&n.push(t.replace(Je,""));return n},del:function(n){try{return Xe.removeItem(ze(n))}catch(n){}},clear:function(){for(var n=this.keys(),t=0;t<n.length;t++)this.del(n[t])}};if(Xe){if(Xe){var Ze="___lxtest";We.nt=!0;try{We.set(Ze,1),1!==We.get(Ze)?We.clear():We.del(Ze)}catch(n){try{We.clear(),Xe.setItem(Ze,1),Xe.removeItem(Ze)}catch(n){Xe=He(),We.nt=!1}}}}else Xe=He(),We.nt=!1;var Ge="tag",Ye=18e5;function nr(n,t,e,r,i,a){var o={};o.c=n,o.k=t,o.v=e,o.t=r||+new Date,o.u=i||"",o.r=a||"",this.toJSON=function(){return Qt.extend(!0,{},o)}}var tr={set:function(n,t,e){var r=void 0,i=[],a=We.get(Ge)||[];if(!Qt.isStr(t)||""===t)return!1;for(var o=0,u=a.length;o<u;o++)er(r=a[o])||(n===r.c?t!==r.k&&i.push(r):i.push(r));return r=new nr(n,t,e,+new Date),i.push(r.toJSON()),We.set(Ge,i),!0},get:function(n,t){var e=void 0,r=We.get(Ge);if(r&&r.length)return e={},Xt.each(r,function(n){var t={};t[n.k]=n.v,er(n)||(e[n.c]=Qt.extend(!0,e[n.c]||{},t))}),n&&t?e[n]&&e[n][t]:n?e[n]:e},getAll:function(){var n=We.get(Ge),e={},r=void 0;return Xt.each(n,function(n){var t=void 0;!er(n)&&n.v&&(r=!0,(t={})[n.k]=n.v,e[n.c]=Qt.extend(!0,e[n.c],t))}),r&&e},clear:function(t,e){if(!arguments.length)return We.set(Ge,[]);if(Qt.isStr(t)){var n=We.get(Ge),r=[];Xt.each(n,function(n){(e!==jt&&n.k!==e||t!==n.c)&&r.push(n)}),We.set(Ge,r)}}};function er(n){var t=Qt.now();return Ye<t-n.t}function rr(n){return n}function ir(n){try{n(fr(this,or),fr(this,ar))}catch(n){if(this._state===ur)return lr(new ir(rr),ar,n)}}ir.prototype.then=function(n,t){return function(n,t,e,r){Mt(e)===cr&&(t._onFulfilled=e);Mt(r)===cr&&(t._onRejected=r);n._state===ur?n[n._pCount++]=t:dr(n,t);return t}(this,new ir(rr),n,t)},ir.all=function(l){return new ir(function(r,e){for(var n,t,i,a=0,o=l.length,u=[],c=0,s=void 0,f=function(e){return function(n){if(e.value=n,e.state=or,++c===e.len&&!s){var t=function(n){var t=[];for(a=0;a<o;a++)t.push(n[a]?n[a].value:void 0);return t}(u);r(t)}}},d=function(t){return function(n){t.value=n,t.state=ar,c++,s||(s=!0,e(n))}};a<o;a++)t=n=void 0,t=l[a],i={value:null,index:a,state:null,len:o},u.push(i),n=i,t.then?t.then(f(n),d(n)):ir.resolve(t).then(f(n),d(n))})},ir.resolve=function(t){if(t instanceof ir)return t;if(Qt.isFunc(t.then)){var e=t.then.bind(t);return new ir(function(n,t){e(n,t)})}return new ir(function(n){n(t)})},ir.reject=function(e){return new ir(function(n,t){t(e)})};var ar=0,or=1,ur=2,cr="function",sr="object";function fr(t,e){return function(n){return lr(t,e,n)}}function dr(e,r){return setTimeout(function(){var n=void 0,t=e._state?r._onFulfilled:r._onRejected;if(void 0!==t){try{n=t(e._value)}catch(n){return void lr(r,ar,n)}vr(r,n)}else lr(r,e._state,e._value)})}function lr(n,t,e){if(n._state===ur){n._state=t,n._value=e;for(var r=0,i=n._pCount;r<i;)dr(n,n[r++]);return n}}function vr(t,n){if(n!==t||!n){var e=void 0,r=Mt(n);if(null===n||r!==cr&&r!==sr)lr(t,or,n);else{try{e=n.then}catch(n){return void lr(t,ar,n)}Mt(e)===cr?function(t,e,n){try{n.call(e,function(n){e&&(e=null,vr(t,n))},function(n){e&&(e=null,lr(t,ar,n))})}catch(n){e&&(lr(t,ar,n),e=null)}}(t,n,e):lr(t,or,n)}return t}lr(t,ar,new Error("promise_circular_chain"))}ir.prototype._state=ur;var pr=!1,hr=2e3,gr=[],mr=!1,_r=void(ir.prototype._pCount=0);function yr(t,e){Xt.each(gr,function(n){n(t,e)}),gr=[]}function br(n){var t=St.KNB;if(Ie()){if(c===me)n(jt,t);else if(pr||_r)n(_r,t);else if(gr.push(n),!mr){mr=!0;var e=j(function(){yr(_r=l,t)},hr);Pt();/meituan \d+/i.test(It)||/meituangroup\/7\.([0-7])\./i.test(It)?yr(_r=a,t):(t.ready(function(){}),t.ready(function(){t.isApiSupported({apiName:"lxlog",success:function(n){!0===n?(pr=!0,Pt(),v(e),yr(jt,t)):yr(_r=a,t)},fail:function(){v(e),yr(_r=h)}})}))}}else n(i,t)}var wr=500,xr="getUserInfo";function Sr(){return new ir(function(a,r){br(function(n,t){var e=St.DPApp,i=j(function(){a({})},wr);t?t.ready(function(){t.use(xr,{success:function(n){var t,e,r;v(i),a((e={},(r=(t=n)[q])&&"0"!==r||"dp"!==t.type?t[q]&&(e[q]=t[q]):e[q]=t[b],"dp"!==t.type&&t[b]&&(e[b]=t[b]),t.unionId&&(e.unionId=t.unionId),t.userId&&(e.userId=t.userId),e))},fail:function(n){v(i),r({code:p})}})}):e&&e[xr]?e.ready(function(){e[xr]({success:function(n){v(i);var t={};(n.dpid||n.userId)&&(t.dpid=n.dpid,t.userId=n.userId,t.unionId=n.unionId),a(t)},fail:function(n){v(i),r({code:o,res:n})}})}):r({code:o})})})}var kr,qr=(kr=function(){for(var n=1*new Date,t=0;n===1*new Date&&t<200;)t++;return n.toString(16)+t.toString(16)},function(){var n=(screen.height*screen.width).toString(16);return kr()+"-"+Math.random().toString(16).replace(".","")+"-"+function(){var n=pe,t=void 0,e=void 0,i=[],r=0;function a(n,t){var e=void 0,r=0;for(e=0;e<t.length;e++)r|=i[e]<<8*e;return n^r}for(t=0;t<n.length;t++)e=n.charCodeAt(t),i.unshift(255&e),4<=i.length&&(r=a(r,i),i=[]);return 0<i.length&&(r=a(r,i)),r.toString(16)}()+"-"+n+"-"+kr()});function Or(){var n,t=Zt.get(pn)||qr();return(n=t)&&Zt.top(pn,n,fn),t}function Ar(){return Math.floor(1+65535*Qt.rnd()).toString(16).substring(1)}function Ir(n){var t=n.match(/(\d+)(?:\.(\d+)(?:\.(\d+))?)?/),e=[];if(t)for(var r=1;r<t.length;r++)e.push(parseInt(t[r]||0));return e}function jr(n,t){var e=Ir(n),r=Ir(t);return!(e[0]<r[0])&&(!(e[0]===r[0]&&e[1]<r[1])&&!(e[0]===r[0]&&e[1]===r[1]&&e[2]<r[2]))}var Dr="getEnv",Er=N,Cr=!1,Nr=!1,Fr=!1,Tr=!1,Lr=[],Vr=0,Mr=void 0,Rr=Qt.now();function Pr(n){var t=(n._opts||{}).nativeOptions||{};return{cb:"_lx"+(100*Qt.now()+Vr++),mn:n._mn,cn:n._cn,data:n._d||{},options:t,ver:4}}function Br(n,t,e,r,i){i=i||{};var a=this;a._cn=n,a._mn=t,a._d=e,a._cb=r,a._opts=i}function Ur(n,t,e,r,i){if(F===Er||T===Er)return r(Er);var a=new Br(n,t,e,Un,i);if(C===Er)a.send(function(n,t){r(n,t)});else if(N===Er){if(Lr.push([a,r]),!Cr){Cr=!0;new Date;new Br(n,Dr,{}).send(function(r,n){if(new Date,r&&E(r),r)Er=F;else{if(Er=C,ft(rn),Qt.isStr(n))try{n=$e.parse(n)}catch(n){}var t=(Mr=n).sdk_ver||"";Nr=jr(t,"4.0.0"),Fr=jr(t,"4.3.0"),Tr=!jr(t,"4.8.0")}Xt.each(Lr,function(n){var t=n[0],e=n[1];r?(E(r),e(r)):t.send(function(n,t){e(n,t)})})})}}else r(L)}function Qr(){return Nr}var Kr=3,$r=150,Jr=5e3,Xr=3500,zr=!(Br.prototype.send=function(e){var r=this,i=Pr(r),n="statistics://_lx/?data="+Nt($e.stringify(i)),t=Qt.now();Mr&&5e3<t-Rr&&r._mn===Dr&&Er===C?(r._mn,e(0,Mr)):(r._mn,i.cb,function(i,a,o){if(me!==c||!window.JavaScriptBridge)return br(function(n,t){if(n)return o(n);var e=!1,r=j(function(){e=!0,o(l)},5e3);t.use(i,{data:a,success:function(n){if(v(r),!e)if("success"===n.status){var t=n.data||{};try{Qt.isStr(t)&&(t=$e.parse(t)),o(jt,t.data?t.data:n)}catch(n){o(n)}}else o(h)},fail:function(){v(r),e||o(h)}})});window.JavaScriptBridge.log(a,function(n){var t=n.data;try{Qt.isStr(t)&&(t=$e.parse(t)),o(jt,t.data?t.data:t)}catch(n){o(n)}})}("lxlog",n,function(n,t){n?(r._mn,i.cb,new Date,E(n)):(r._mn,i.cb,new Date),e(n,t)}))}),Hr=[],Wr=[],Zr=0,Gr=0;function Yr(n,t,e,r,i){var a=[{project:"web-lx-sdk",pageUrl:kt.href,resourceUrl:n,category:i?"jsError":"ajaxError",sec_category:t,level:"error",unionId:e,timestamp:Qt.now(),content:""+r||""}],o=ai("//catfront.dianping.com/api/log?v=1","application/x-www-form-urlencoded");o&&(o.onerror=o.onreadystatechange=function(){},o.send("c="+encodeURIComponent($e.stringify(a))))}function ni(n,t){if(Kr<=Gr)return!1;t=Qt.extend({cb:Vt},t||{});var e,r,i,a,o=(Wn&&!e||(Wn=Yn(Pn)),Wn),u=!nt.use_post;try{u&&function(n){var t=Pt().toString(16)+Zr++,e=void 0,r=(i=n,a=[],o=[{l:On,s:An},{l:_n,s:yn},{l:bn,s:wn},{l:xn,s:Sn},{l:In,s:jn},{l:kn,s:qn}],Xt.each(i,function(n){var t=Qt.extend(!0,{},n);Xt.each(o,function(n){oi(t,n.l,n.s)});var e=[];Xt.each(n.evs,function(r){r=Qt.extend(!0,{},r),Xt.each(r,function(n,t){if(-1<t.indexOf("val_")&&(r[t.replace("val_","")]=r[t],delete r[t]),oi(r,"refer_url","urlr"),r[t]&&"url"===t){var e=kt.hash;e&&(r.urlh=e),delete r[t]}}),e.push(r)}),t.evs=e,t[jn]===t.uuid&&delete t.uuid;var r=t[wn];r&&(t[wn]=r.replace("data_sdk_","")),delete t.ua,a.push(t)}),a);var i,a,o;if(Xt.each(r,function(n){delete n.ua}),!function(n){for(var t=n.length,e=t,r=0;r<t;r++)127<n.charCodeAt(r)&&e++;return 1.5*e<2036}(e=$e.stringify(r)))return Xt.each(n,function(n){Xt.each(n.evs,function(n){var t=Qt.extend(!0,{custom:{_s:1}},n.val_lab||{});n.val_lab=t})}),!1;var u=Gt(e),c=Nt(u),s=(Zn&&!f||(Zn=Yn(Bn)),Zn);var f;return s+=-1<s.indexOf("?")?"&d="+c:"?d="+c,c.length,function n(t,e){var r=void 0,i=Fn+ae++;if(!(2<(e=e||0)))return St[i]=r=new Image,r.onload=function(){St[i]=null},r.onabort=r.onerror=function(){St[i]=null,n(t,++e)},r.src=t,r}(s=s+"&t=1&r="+t),!0}(n)?t.cb(C):ei(o,n,t)||xe&&ti(o,n,t)||(r=o,i=n,(a=At.sendBeacon)&&(r=ii(r),a&&a.call(At,r,$e.stringify(i)))&&t.cb(C))}catch(n){return Yr(kt.path,"report-ajax",0,n.message,!0),!1}return!0}function ti(n,t,e,r){if(!St.XDomainRequest)return!1;try{var i=new XDomainRequest;return i.open(Ln,ii(n),!0),i.onload=function(){Gr=0,e&&e.cb(C),Hr=[]},i.onerror=function(){Gr++},i.ontimeout=function(){Gr++,r||(ri(n,t,ti,e),zr=!0)},i.timeout=Jr,i.send($e.stringify(t)),!0}catch(n){return!1}}function ei(t,e,r,i,a){if(!Jn())return!1;try{var o=ai(t,"text/plain");return o.onreadystatechange=function(){if(4===o.readyState){var n=o.status;200<=n?(Gr=0,r&&r.cb(C,o.responseText),Hr=[]):(Gr++,i||!1!==a||(ri(t,e,ei,r),zr=!0)),r.nm===V&&(400<=n||0===n)&&Yr(t,"web-report-fail",e[0].union_id,n),o.onreadystatechange=null}},o.onerror=function(){o.abort(),Gr++},o.send($e.stringify(e)),!0}catch(n){return!1}}function ri(n,t,e,r){Hr=Hr.concat(t);var i=void 0,a=Xt.reduce(Hr,function(n,t){return t.evs=n.evs.concat(t.evs),i=t.evs.length,$r<i&&Xt.slice(t.evs,i-$r,i),t});if(Hr=[a],Wr.push(r),!zr)var o=setInterval(function(){if(Kr<=Gr)return clearInterval(o),!1;e(n,Hr,function(t){clearInterval(o),zr=!1,Xt.each(Wr,function(n){n&&n(t)})},!0)},Xr)}function ii(n){var t="_lxsdk_rnd="+(Pt().toString(16)+Zr);return-1===n.indexOf("?")?n+"?"+t:n+"&"+t}function ai(n,t){var e=new(Qn());return e.open(Ln,ii(n),!0),e.timeout=Jr,e.setRequestHeader("Content-Type",t),e}function oi(n,t,e){return Lt.call(n,t)&&n[t]&&(n[e]=n[t],delete n[t]),n}var ui={},ci=on,si=[],fi=null;function di(n){var t=/(^\w+-\w+-\w+-\w+-\w+)/;if(t.test(n)){var e=n.match(t);Zt.top(vn,e[1],fn)}else n&&!/(^\w+\.\d+\.\d+\.\d+\.\d+)/.test(n)&&n.length<100?Zt.top(vn,n,fn):Zt.top(vn,"",-1)}var li=0,vi=1,pi=2,hi="|";function gi(n){var t=Zt.get(gn);return t?t.split(hi)[n]:""}function mi(n,t,e){var r,i,a;Zt.top(gn,(r=t,i=e,(a=[]).push(n||_i()),a.push(r||yi()),a.push(i||bi()),a.join(hi)),dn)}function _i(){return gi(li)}function yi(){return gi(vi)}function bi(){var n=0,t=gi(pi);return isNaN(t)||(n=parseInt(t)),n<0?0:n}function wi(n){mi(jt,jt,n)}function xi(n,c){return new ir(function(o,u){j(function(){u({code:l})},3e3),Ur(n,"getEnv",{},function(n,t){if(n)u(n);else{fi=nt.nativeSDKVer=t.sdk_ver,a=nt.nativeSDKVer,Qt.isStr(a)&&(et.MVL=-1<oe(a,"4.14.0"),et.QC=-1<oe(a,"4.14.0"),et.getReqId=-1<oe(a,"4.12.0"));var e={uuid:b,msid:w,uid:S,dpid:q,appnm:O,union_id:s};for(var r in c=c||{},e){var i=e[r];t[r]&&(c[i]=t[r])}o(c)}var a})})}function Si(){var n=Zt.get(mn);if(n){var t=n.split(","),e=/^\d+\.\d{5,}$/;return 3!==t.length?null:e.test(t[0])&&e.test(t[1])?{lat:t[0],lng:t[1],tm:t[2]}:null}return null}function ki(n){return Qt.extend(!0,{},n)}function qi(n){var t=qt.getElementsByTagName("meta"),e=Yt(t,"lx:appnm"),r=Yt(t,"lx:defaultAppnm"),i=me,a=qt.domain,o=st();return it("appnm",e),it("defaultAppnm",r),_e&&le(me||e||r||a),ye?e||(2===o?n:i||(r||a)):e||(i||(r||a))}function Oi(){var n,t,e,r,i,a,o=me===_||me===m,u=(n=Zt.get(vn),t=Zt.get("iuuid")||Zt.get("uuid")||n,e=_i(),r=yi(),i=Zt.get(hn)||Zt.get(q),a={},t&&(a[b]=t),e&&(a[w]=e),n&&(a[y]=n),r&&(a[S]=r),i&&(a[q]=i),a),c=void 0,s={};o&&(s=function(n){var t={};if(I.test(n)){var e=Qt.parseQuery(n);return e[b]&&(t[b]=e[b]),e[x]&&(t[x]=e[x]),e[k]&&(t[S]=e[k]),t}return t}(kt.href)),(c=Qt.extend(u,s)).ct=we;var f=Re();f&&(c[A]=f);var d,l,v=Or();c[y]=v,c[b]||(c[b]=v),c[w]||(c[w]=(d=[],l=+new Date,d.push(l.toString(16)),d.push(Ar()),d.push(Ar()),d.push(Ar()),d.join("-")),mi(c[w],c.uid||"")),c[b]&&di(c[b]);var p=qi();Qt.isStr(p)&&(c[O]=p);var h,g=(h=It.replace(/^.*([A-Za-z-]+)\/com\.(sankuai(?!\.meituan\.)|meituan(?!\.sankuai\.)|dianping|sankuai\.meituan|meituan\.sankuai)\.([.A-Za-z0-9-]+)\/(\d+[.\d]+).*$/,"$4"),/^\d+(\.\d+)+$/.test(h)?h:null);return g&&(c.app=g),c}function Ai(t){return function(n){var e=n;return t!==n&&(e=Qt.extend(t,n)),e.dpid&&e.uid?e:Sr().then(function(n){var t={};return n.dpid&&(t.dpid=n.dpid,n.userId&&(t.uid=""+n.userId),n.unionId&&(t.union_id=n.unionId)),e=Qt.extend(e,t)},function(n){return E(n),e})}}var Ii=function(n){var o=Oi();if(n&&me||Ie()){var t=xi(n,o);return r===me&&(t=t.then(Ai(o),function(n){return E(n),Ai(o)()})),t.then(function(n){var t=qi(n[O]),e=n[q],r=n[b],i=n[s],a=n;return n!==o&&(a=Qt.extend(o,n)),Qt.isStr(t)&&(a[O]=t),r&&di(r),e&&Zt.top(hn,e,fn),i&&Zt.top("_lxsdk_unoinid",i,fn),a},function(n){return n&&E(n),o})}var e=ki(o);return ir.resolve(e)};function ji(n){return cn===ci?ir.resolve(ki(ui)):un===ci?new ir(function(t){var n;n=function(n){t(n)},si.push(n)}):(ci=un,Ii(n).then(function(e){return ui=Qt.extend(!0,{},e||{}),ci=cn,Xt.each(si,function(n,t){Qt.isFunc(n)&&si[t](e)}),e}))}var Di=/([a-fA-F0-9-]+)(\.\d+)/,Ei="_hc.v",Ci=525600,Ni="",Fi=/(dper|dianping|51ping)\.com/.test(Ot);function Ti(){return function(){function n(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n()}()+"."+Math.round(+new Date/1e3)}function Li(){return!Ni&&Fi&&(Ni=function(){var n=Zt.get(Ei);if(n||(n=Ti(),Zt.top(Ei,n,Ci)),n){var t=n.match(Di);return t?t[1]:""}return""}()),Ni}var Vi=function(){var n=void 0;try{var t=document;if(t.querySelectorAll){var e=t.querySelectorAll("head script"),r=t.querySelectorAll("body script"),i=[];Xt.each(e,function(n){i.push(n)}),Xt.each(r,function(n){i.push(n)});for(var a=0;a<i.length;a++){var o=i[a].innerHTML.match(/\[['"]\s*_setPageId\s*['"]\s*,\s*(\d+)\s*\]/);if(o){n=o[1];break}}}}catch(n){}return function(){return n}}();function Mi(n){var t=this;t.s=n;var e=void 0,r=We.get(Nn)||{s:n,d:t.d};r.s!==n?(We.del(Nn),e=t.d=[]):e=t.d=r.d||[],t.l=e&&e.length||0}Mi.prototype={constructor:Mi,set:function(n,t,e){var r=this,i=r.l,a=r.d,o=r.indexOf(n),u={scid:0<i?a[i-1].scid+1:0,cid:n,bid:t,sf:e};-1<o?a.splice(o,i-o,u):a.push(u),r.l=a.length,We.set(Nn,{s:r.s,d:a})},indexOf:function(n){for(var t=this.d||[],e=0,r=t.length;e<r;e++){if(t[e].cid===n)return e}return-1},toJSON:function(){var n=this.d;return n&&n.length?n:null}};var Ri=null;function Pi(){return Ri}var Bi="category",Ui="setEvs",Qi="val_bid",Ki="page",$i="s_from",Ji="lat",Xi="lng",zi=[],Hi=qt.referrer,Wi=[],Zi=void 0,Gi=void 0,Yi={},na=0,ta=function(n,t,e){if(e){var r={},i={custom:r};r[t]=e,n=Qt.extend(!0,n||{},i)}return n};function ea(n,t){this.env=t||{},this.opts=Qt.extend(!0,{},n),zi.push(this),mt=this}var ra=ea.prototype;function ia(n){return 6===n._ptpvs}function aa(){return!na}function oa(n){return(n=n||{})&&!Qt.isObj(n)&&(n={cid:""+n}),n}function ua(e,r,i,a,o){var n,u=this,t=o=o||{},c=t.isLeave,s=t.currentPageInfo,f=t.mvDelay,d=t.sf;if(st()===an){var l=la(u),v=ma(tr.getAll()),p=pa(e,r,i,a),h=p.body,g=p.ev,m=_a(l,h,v);if(e===B){if(f)return Qt.run(h,function(n){Wi.push(n)}),void j(function(){if(Wi.length){var n=_a(l,Wi,v);u.send(n),Wi=[]}},f*en)}else{if(e===U)return void _t.call(u,U,l,h[0],{tag:v});if(e===R){if(s&&function(n,t){Qt.isObj(n[Dn])||(n[Dn]={});n[Dn][Ki]=t}(g,u._cpi),m=_a(l,h,v),c){var _=re(),y=va(M,r,jt,_);m.evs.push(y)}_e&&d&&Pi().set(r,i,d)}}u.send(m,{nm:e})}else{var b=u.env,w=void 0,x=(n=(n={isQuickReport:!1})||{},{isQuickReport:rt("QC")&&!!n.isQuickReport}),S=[ga.call(u,e,r,i,a)];if(e===R&&(w={sf:d},u._cpi&&(w.cpi=u._cpi),S=[ga.call(u,e,r,i,a,null,w)],c)){var k=re(),q=ga.call(u,M,r,null,k);S.push(q)}b[A]&&(S=function(n,t){if(!Xt.isArray(n)||!n.length)return n;if(!Qt.isObj(n[0][Dn]))return n[0][Dn]={page:{utm:t[A]}},n;if(!Qt.isObj(n[0][Dn][Ki]))return n[0][Dn][Ki]={utm:t[A]},n;return n[0][Dn][Ki]=Qt.extend(!0,n[0][Dn][Ki],{utm:t[A]}),n}(S,b));var O=da(b[Bi]);new Date;Ur(O,Ui,S,function(n,t){n?(ft(an),E(n),new Date,ua.call(u,e,r,i,a,o)):new Date},{nativeOptions:x})}}function ca(){return Zi||(Zi=sa()),Zi}function sa(){return Qt.now().toString(16)+"-"+Math.floor(65535*Qt.rnd())+"-"+Math.floor(65535*Qt.rnd())}function fa(n){var t,e,r=n.nm;V===r?(n.nm="mpt",n.val_act="pageview"):M===r?(n.nm="report",n.val_act="quit"):(n.nm="mge",n.event_type=(t=r,(e={})[K]="order",e[$]="pay",e[R]="click",e[Q]="return",e[B]="view",e[P]="click",e[t]||r)),n.nt=0,n.isauto=8}function da(n){return 0===n.indexOf("data_sdk_")&&(n=n.replace(Bi,"")),n}function la(n){var t,e,r=Qt.extend(!0,{},n.env);r[Bi]=(t=r[Bi],e="data_sdk_",0!==t.indexOf(e)&&(t=e+t),t);var i=r.utm,a={ua:pe,sdk_ver:g,ch:i&&i.utm_source?i.utm_source:"web",sc:Oe};return a[On]=g,Qt.extend(!0,a,r)}function va(n,t,e,r,i){i=i||D;var a,o,u,c,s,f=(a=!0,o=bi(),!0===a&&wi(++o),(!o||o<-1)&&wi(o=0),o),d=Si(),l=void 0,v=V===n,p=K===n,h=$===n,g={nm:n,tm:Qt.now(),nt:an,isauto:i,val_cid:t,req_id:ca(),seq:f};if(v){var m=kt.href;g.url=m,(l=Hi)&&(g.refer_url=l),i===D&&(Hi=m)}return(p||v||h)&&_e&&(u=g,(c=Pi().toJSON())&&(u[$i]=c),g=u),r=ta(r,"_hguid",Li()),(s=r)&&s.custom&&"v3"===s.custom._api&&!t&&(g.val_cid=qt.title||kt.pathname,r=ta(r,"_cid",1)),v&&(r=ta(r,"_hpid",Vi())),e&&(g[Qi]=e),r&&(g[Dn]=r),d&&(g[Ji]=d.lat,g[Xi]=d.lng),g}function pa(n,t,e,r,i){var a=va(n,t,e,r,i);return{body:function(n){{if(Wi&&0<Wi.length){var t=Wi;return Wi=[],t.push(n),t}return[n]}}(a),ev:a}}function ha(n){return be?n:ge&&!Tr?n:Nt(n)}function ga(n,t,e,r,i,a){a=a||{},i=i||D;var o=this.env.appnm,u=Si(),c=!dt,s=void 0,f={nm:n,tm:Qt.now(),nt:rn,isauto:i,val_cid:t,shouldCover:c};f=Qt.extend(!0,f,Yi),Gi&&(f.req_id=Gi),a.sf&&(f._sf=a.sf);var d=void 0,l=Qt.extend(!0,{},r||{}),v=V===n;if(v){var p=ha(kt.href);d={ua:pe,url:p};var h=Re();h&&h.utm_source&&(d.utm=h),(s=Hi)&&(d.refer_url=ha(s)),i===D&&(Hi=p)}else d={};return Xt.each({web_req_id:ca(),web_sdk_ver:g,lxcuid:Or(),web_appnm:o,covered_by_native:c},function(n,t){Qt.isStr(n)&&(d[t]=n)}),Qt.isObj(l.custom)&&"v3"===l.custom._api&&(d.web_appnm=function(n){if(Qt.isStr(n))return n&&Gn[n]||Gn}("appnm")),a.cpi&&!l.page&&(l.page=a.cpi),l.custom=Qt.extend(!0,l.custom,d),l=ta(l,"_hguid",Li()),v&&(l=ta(l,"_hpid",Vi())),n!==P||Fr?Qr()||fa(f):Qr()?f.nm=R:fa(f),f[Dn]=l,u&&(f[Ji]=u.lat,f[Xi]=u.lng),e&&(f[Qi]=e),v&&!Qr()&&(f.val_val=l,delete f[Dn]),f}function ma(n){return n}function _a(n,t,e){return Xt.isArrayLike(t)||(t=[t]),Qt.run(t,function(n){n&&e&&(n.tag=e)}),n.evs=t,n}function ya(n,t){var e={};return e[tn]=t,Qt.extend(e,n)}function ba(e,n,t,r){var i,a,o,u,c=(i=n,a=t,o=r,u=null,!Qt.isStr(i)||a||o?Qt.isObj(i)&&Qt.isStr(a)&&!o&&(u=a,a=null):(u=i,i=null),u&&(o=Qt.extend({cid:u},o||{})),{lab:i,env:a,opts:o}),s=c.lab,f=c.env;r=oa(c.opts);var d=e.opts.cid=r.cid||e.opts.cid;r=Qt.extend({cid:d},r),f&&Qt.isObj(f)&&Xt.each(f,function(n,t){e._dt.set(t,n)}),e._dt.pageView(s,r)}function wa(n,t){this.env=n||{},this.opts=t||{},this._t=[]}ra.set=function(n,t,e){var r=this,i=r.env;if(Qt.isObj(n))Ht(n,function(n,t){r.set(t,n)});else if(it(n,i[n]=t),"utm"===n&&Qt.isObj(t)&&Me(t),rn!==st()||Tn[n])Qt.isFunc(e)&&e(i,r);else{var a={},o=da(i[Bi]);a[n]=t,Ur(o,"setEnv",a,function(){Qt.isFunc(e)&&e(i,r)})}},ra.get=function(n,t){Qt.isFunc(t)&&t(this.env[n],this)},ra.pageView=function(e,r){r=oa(r)||{};var n=void 0,i=this,t=i.opts.cid,a=r.cid||t,o=r.isauto||D,u=r.isAutoInit,c=r.reportStatus,s=t&&!(ia(i)||u)&&!aa(),f=c===an||an===st(),d=i.env;if(this._cpi=e,s&&!ot()){var l=re(!0);n=f?va(M,t,null,l):ga.call(i,M,t,null,l),at(0)}if(t&&(ia(i)||aa())||(Zi=sa()),i.opts.cid=a,f){var v=la(i),p=ma(tr.getAll()),h=pa(V,a,null,e,o).body;s&&n&&h.unshift(n);var g=_a(v,h,p);this.send(g,{nm:V}),u||na++}else{var m=[ga.call(i,V,a,null,e)];s&&n&&m.push(n),Xt.each(m,function(n){n.appnm=d.appnm}),Ur(da(d[Bi]),Ui,m,function(n,t){n?(ft(an),i.pageView(e,r),Yr(kt.href,"native-report-error",i.env.union_id,E(n))):u||na++})}i._ptpvs=u?6:D},ra.pageDisappear=function(e,r){r=Qt.extend({},r);var i=this,n=r.cid||i.opts.cid,t=r.getDurationFromLastPV||!1,a=r.shouldStore;at(f);var o=re(t);if(e=Qt.extend(o,e),an===st()||a){var u=_a(la(i),va(M,n,null,e),ma(tr.getAll()));a&&We.nt?(de()&&(u[O]=ve()),We.set(d,u)):i.send(u)}else{var c=this.env,s=[ga.call(i,M,n,null,e)];Ur(da(c[Bi]),Ui,s,function(n,t){n&&(ft(an),i.pageDisappear(e,r))})}wt()},ra.systemCheck=function(e,r,i){i=Qt.extend({},i);var a=this,n=i.cid||a.opts.cid,t=!!i.isLXLog;if(an===st()){var o=la(a),u=_a(o,pa(P,n,e,r).body,ma(tr.getAll()));t&&(o.category="others"),this.send(u)}else{var c=a.env,s=[ga.call(a,P,n,e,r)],f=da(c[Bi]);t&&(f="others"),Ur(f,Ui,s,function(n,t){n&&(ft(an),a.systemCheck(e,r,i))})}},ra.moduleView=function(n,t,e){e=Qt.extend({},e);var r=this.opts.mvDelay||e.delay,i=e.cid||this.opts.cid;ua.call(this,B,i,n,t,{mvDelay:r})},ra.moduleViewList=function(n,t,e){e=Qt.extend({},e);var r=this.opts.mvDelay||e.delay,i=e.cid||this.opts.cid,a=rt("MVL");st()!==rn||a?ua.call(this,U,i,n,t):ua.call(this,B,i,n,t,{mvDelay:r})},ra.moduleClick=function(n,t,e){var r=(e=Qt.extend({},e)).cid||this.opts.cid,i=e.sf;e&&e.isLeave&&at(f);var a=e.withPageInfo&&Qt.isObj(this._cpi)?this._cpi:jt;ua.call(this,R,r,n,t,{currentPageInfo:a,isLeave:e.isLeave,sf:i})},ra.moduleEdit=function(n,t,e){var r=(e=Qt.extend({},e)).cid||this.opts.cid;ua.call(this,Q,r,n,t,e)},ra.order=function(e,r,i){i=Qt.extend({},i);var a=this,n=i.cid||a.opts.cid;if(ie(0,r),an===st()){var t=_a(la(this),pa(K,n,e,r).body,ma(tr.getAll()));this.send(t)}else{var o=this.env,u=[ga.call(a,K,n,e,r)];Ur(da(o[Bi]),Ui,u,function(n,t){n&&(ft(an),a.order(e,r,i))})}},ra.pay=function(e,r,i){i=Qt.extend({},i);var a=this,n=i.cid||a.opts.cid;if(ie(0,r),an===st()){var t=_a(la(a),pa($,n,e,r).body,ma(tr.getAll()));this.send(t,{cb:function(){tr.clear()}}),a.clearTag()}else{var o=this.env,u=[ga.call(a,$,n,e,r)];Ur(da(o[Bi]),Ui,u,function(n,t){n&&(ft(an),a.pay(e,r,i))})}},ra.tag=function(e,n,t,i){var r=void 0,a=this.env,o=arguments,u=[],c=function(n){if(!Qt.isObj(n))return n;for(var t=n,e=0,r=u.length;e<r;e++){if(!t)return t;t=t[u[e]]}return t},s=function(){Xt.each(o,function(n){if(!Qt.isStr(n))return!1;u.push(n)})},f=function(n,t,e){var r={};r[n]=t,Ur(da(a[Bi]),"setTag",r,function(n,t){i&&(e&&s(),i(n,c(t),!0))})},d=function(n){var t=tr.getAll();n||s(),i&&i(0,c(t),!1)};if(Xt.each(o,function(n){Qt.isFunc(n)&&(i=n)}),Qt.isObj(e)){var l=this;Xt.each(e,function(n,t){l.tag(t,n)})}else Qt.isStr(e)&&Qt.isObj(n)?an!==st()?f(e,r=n,!0):(Ht(n,function(n,t){tr.set(e,t,n)}),d(!0)):(Qt.isObj(t)||Qt.isStr(t))&&function(n){if(!Qt.isStr(n)&&!n.length)return!1;return!0}(e)&&Qt.isStr(n)?an!==st()?((r={})[n]=t,f(e,r,!0)):(tr.set(e,n,t),d(!0)):Qt.isFunc(e)||Qt.isFunc(n)||Qt.isStr(e)&&Qt.isStr(n)&&Qt.isFunc(t)?an!==st()?(s(),Ur(da(a[Bi]),"getTag",{},function(n,t){i&&i(n,c(t),!0)})):d():i&&i(-1)},ra.clearTag=function(n,t,e){var r=0;an===st()?(Qt.isFunc(n)&&(e=n,n=jt),tr.clear(n,t),e&&e(0)):r=-1,e&&e(r)},ra.sfrom=function(r){var i=void 0,n=this.env;an!==st()?Ur(da(n[Bi]),"getSFrom",{},function(n,t){if(t){var e=t.data?t.data:t;i=Qt.isStr(e)?JSON.parse(e):e,r(n,i)}}):r(1,[])},ra.send=function(n,t){var e=[];t=Qt.extend({cb:function(){}},t),Qt.run(n,function(n){de()&&(n[O]=ve()),e.push(n)});var r=function(){var n=We.get(d);n&&We.del(d);return n}();r&&e.unshift(r),ni(e,t)},ra.getAll=function(){return zi};var xa=wa.prototype;xa.create=function(n,t){var e=Qt.extend({},this.env);e=Qt.extend(e,{category:n});var r=Qt.extend({isDefault:!1},this.opts),i=new ea(r=Qt.extend(r,t||{}),e);return this._t.push(i),t.isDefault&&(this._dt=i),i},xa.config=function(n,t){return jt!==n&&(nt[n]=t),"cid"===n&&Jt(t)&&(this.opts.cid=t),nt[n]},xa._initPV=function(n,t){ba(this,this.config("pageValLab"),n=Qt.extend(n,this.config("pageEnv")),{isauto:6,reportStatus:an,cid:t,isAutoInit:!0})},xa.pageView=function(n,t,e){ba(this,n,t,e)},xa.moduleView=function(n,t,e){this._dt.moduleView(n,t,e)},xa.moduleViewList=function(n,t,e){this._dt.moduleViewList(n,t,e)},xa.systemCheck=function(n,t,e){this._dt.systemCheck(n,t,e)},xa.moduleClick=function(n,t,e){this._dt.moduleClick(n,t,e)},xa.moduleEdit=function(n,t,e){this._dt.moduleEdit(n,t,e)},xa.order=function(n,t,e,r){this._dt.order(n,ya(e,t),r)},xa.pay=function(n,t,e,r){this._dt.pay(n,ya(e,t),r)},xa.pageDisappear=function(n,t){this._dt.pageDisappear(n,t)},xa.tag=function(n,t,e,r){this._dt.tag(n,t,e,r)},xa.sfrom=function(n){this._dt.sfrom(n)},xa.clearTag=function(n,t,e){this._dt.clearTag(n,t,e)},xa.getAll=function(n){n&&n(this._t)},xa.getTracker=function(t,n){var e=Xt.find(this._t,function(n){return n.env.category===t});n&&n(e)},xa.get=function(n,t){this._dt.get(n,t)},xa.set=function(n,t,e){this._dt.set(n,t,e)},xa._setRequestID=function(n){Gi=n},xa._setNativeEvsData=function(n,t){var e;e=t,Yi[n]=e};var Sa=void 0,ka=!0,qa=function(){var n,t,e;!nt.onWebviewAppearAutoPV||(t=n||Pt(),e=ne(),ee.update(t),Ft=t,e&&(e.l=t),Pa(),Sa.pageView(),at(0))},Oa=function(){!!nt.onWebviewAppearAutoPV&&(ot()||(at(f),Sa.pageDisappear({},{getDurationFromLastPV:!0})))},Aa=function(){ka=!0,qa()},Ia=function(){ka=!1,Oa(),wt()},ja=function(){ka&&qa()},Da=function(){ka&&(Oa(),wt())},Ea=void 0,Ca=!!/\d\.\d\.\d/.test(je)&&0<=oe(je,"11.3.0");function Na(n,t){Qt.isStr(n)&&(t=Qt.isFunc(t)&&t||function(){},"on"+n in St||"KNB:"+n in St?Qt.on(window,n,function(n){t(n)}):(Ea=window.KNB)&&Qt.isFunc(Ea.subscribe)&&Ea.subscribe({action:n,handle:function(){t()},success:function(){},fail:function(n){}}))}var Fa={hook:function(){try{Na("appear",Aa),Na("disappear",Ia),Ca&&(Na("foreground",ja),Na("background",Da))}catch(n){Yr("sdk","api-error","",n.stack,!0)}Sa=Va}},Ta=[],La=on,Va=void 0,Ma=void 0;function Ra(n,t){return{cb:n,cmd:t}}function Pa(){var t,r;lt(!1),(t=Ma,r={none:!0},new ir(function(e){try{var n=oe(fi,"4.12.0");!fi||!Ut(n)||n<0?e(r):t&&me||Ie()?Ur(t,"getReqId",{},function(n,t){e(n?r:t)}):e(r)}catch(n){e(r),Yr("sdk","api-error","",n.stack,!0)}})).then(function(n){var t=n||{},e=t.val_ref,r=t.req_id,i=t.refer_req_id,a=!!(r||e||i);r&&Va._setRequestID(r),e&&Va._setNativeEvsData("val_ref",e),i&&Va._setNativeEvsData("refer_req_id",i),lt(a)})}function Ba(n,t){if(cn===La)n&&n(Va);else if(un===La)n&&Ta.push(Ra(n,t));else{Qt.now();Ta=Ta.concat(Ra(n,t));var e=qt.getElementsByTagName("meta"),a=Yt(e,"lx:cid")||nt.cid;if(!(Ma=Yt(e,"lx:category")))return void(La=on);La=un;var o=Yt(e,"lx:mvDelay");o=isNaN(o)?0:parseInt(o,10);var u="off"!==Yt(e,"lx:autopv");nt.autoPV=u,j(Pa,1e3),ir.all([ji(Ma)]).then(function(n){var t,r=n[0],e=r.appnm;!Qt.isStr(e)||qt.domain,Va=new wa(r,{cid:a,isDefault:!0,mvDelay:o}),Ma&&Va.create(Ma,{isDefault:!0}),r=Qt.extend(!0,Va._dt.env,r),Va._dt.env=r,Qt.now();try{var i=[];Xt.each(Ta,function(n){var t=n.cb,e=n.cmd;"config"===e||"set"===e?t(Va,r):i.push(n)}),_e&&(t=r.msid,Ri||(Ri=new Mi(t))),u&&Ma&&a&&a&&Va._initPV(r,a),Fa.hook(function(){}),Xt.each(i,function(n){n&&n.cb&&n.cb(Va,r)})}catch(n){}}).then(function(){La=cn},function(n){throw La=cn,n})}}var Ua=[["click",Y],["tap",Y],["view","moduleView"],["return","moduleEdit"],["order",nn],["pay","pay"]],Qa=Xt.reduce(Ua,function(n,t){return n[t[0]]=t[1],n},{}),Ka=[["mpt",Z],["report","pageDisappear"]],$a=Xt.reduce(Ka,function(n,t){return n[t[0]]=t[1],n},{}),Ja=Xt.reduce(["config","event","send","use"],function(n,t){return n[t]=!0,n},{}),Xa=function(n,t){var e=qt.getElementsByTagName("head")[0],r=qt.createElement("meta");r.setAttribute("name",n),r.setAttribute("content",t),e.appendChild(r)},za=function(e,n){return e=e||{},Ht(n,function(n,t){1==={act:1,cid:1,val:1,lab:1,bid:1}[t]?e["val_"+t]=n:e[t]=n}),e},Ha=function(n,t,e){(n&&!$t(n)&&(n={custom:{_lab:n}}),!n&&e&&(n={}),e)&&((n.custom=n.custom||{})[t]=e);return n},Wa=function(n,t,e){return n&&!$t(n)&&(n={custom:{_lab:n}}),n&&(n[t]=e),n},Za=function(n,t){var e=n[Dn],r=n[Cn];if(e&&e===r&&(r=Kt(!0,{},r)),t&&(r||e)){var i=e;e=r||{},i&&(e=Ha(e||{},"_lab",i))}else if(!t&&(r||e)){if(Jt(r)&&(r={analyse_val:r}),Jt(e))e={val_lab:e};r&&(e=Wa(e||{},"page",r))}return jt!==n[X]&&(e=Ha(e||{},"_act",n[X])),jt!==n[J]&&(e=Ha(e||{},"_et",n[J])),jt!==n[H]&&(e=Wa(e||{},H,n[H])),jt!==n[W]&&(e=Ha(e||{},"_el_id",n[W])),e};function Ga(n){var t,e,r,i=(e=(t=n).split("."),r=void 0,2===e.length&&(t=e[1],r=e[0]),[t,r]),a=void 0;return i[1]&&(a=i[1]),[n=i[0],a]}var Ya=function t(e,n){var r=Ga(e);e=r[0];var i=r[1],a=n[0],o=n[1];if(Xt.isArray(a))return Wt(a,function(n){return t(i?i+"."+e:e,[n,o])});var u,c,s=(a.nm||"mge").toLowerCase();a.nm=s,(c=(u=a).val)&&(za(u,c),delete u.val),a=u;var f="mge"===s;if("mpt"===s)return function(n){n=za(n,n.val);var t=Za(n,!0);return[Z,t,null,n[z]]}.apply(null,n);var d,l,v=nn===s,p="pay"===s,h=a[J],g=a[X],m=Za(a,!1);v||p||h||!f||!g?p||v?e=s:(l=h,e="mge"===(d=s)?l?Qa[l]||G:Y:"mpt"===d||"report"===d?$a[d]:G,f||(m=Ha(m||{},"_nm",s))):e=Y;var _=a[z];return _&&((o=o||{}).cid=_),i&&Ha(m,"_logchannel",i),Ha(m=m||{},"_api","v3"),e===nn||"pay"===e?[e,a[En],m.order_id,m,o]:[e,a[En],m,o]},no=function n(){if(!n.f){Xa("lx:autopv","off"),n.f=!0}},to=function(n){if(!n||!n.length)return n;try{var t=n[0];0<(o=(a=t).indexOf("."))&&(a=a.substr(o+1)),Ja[a]&&(n=Xt.slice(n,1),eo(t)?(fe(3),no(),n=Ya(t,n)):ro(t)?(fe(3),no(),n=function(n,t){var e=Ga(n)[1];n=Z;var r=t[1],i=t[2],a=e?{custom:{_logchannel:e}}:jt,o={};if(Jt(r))$t(i)?a=i:Jt(i)&&(a=Ha({},"analyse_val",i));else if($t(r)){i=(o=za(o,r))[Cn],Jt(i)&&(i=Ha({},"analyse_val",i)),a=i;var u=o[Dn];u&&Ha(a,"_lab",u),r=o[z]}var c=void 0;return r&&((c={}).cid=r),[n,a=Ha(a,"_api","v3"),jt,c]}(t,n)):io(t)?(fe(3),no(),n=function(n,t){var e=t[0],r=t[1];if(e&&(e=e.replace(/^data_sdk_/i,""),Xa("lx:category",e)),$t(r))return["set",r]}(0,n)):ao(t,n[0],n[1])?(no(),e=t,r=n[0],i=n[1],n="appnm"===r&&Jt(i)?void Xa("lx:appnm",i):("cid"===r&&Jt(i)&&Xa("lx:cid",i),[e,r,i])):n.unshift(t))}catch(n){}var e,r,i,a,o;return n},eo=function(n){var t=n.indexOf(".");return 0<t&&(n=n.substr(t+1)),"event"===n},ro=function(n){var t=n.indexOf(".");return 0<t&&(n=n.substr(t+1)),"send"===n},io=function(n){return"use"===n},ao=function(n,t){var e=!1;return"cid"!==t&&"appnm"!==t||(fe(3),e=!0),"config"===n&&e},oo=void 0,uo=void 0;function co(n,t,e,r,i){if(Qt.isFunc(t))t.call(n,n,r,i);else if(!i&&Qt.isStr(t)&&Qt.isFunc(n[t]))return n[t].apply(n,e)}function so(){if(!uo){uo=!0;var r=void 0;xe&&Qt.on(qt,"mouseup",function(n){var t=n.target||n.srcElement,e=t.tagName+t.href;e=e.toLocaleLowerCase(),1===t.nodeType&&/^ajavascript:/i.test(e)&&(r=new Date)});var n=St.onbeforeunload;_e&&be?St.addEventListener("pagehide",ue(!1,xe,r,void 0,po,jt,ot)):St.onbeforeunload=ue(!1,xe,r,void 0,po,n,ot)}}var fo=1,lo=100,vo=0;function po(r){var n=arguments;if(n.length){var i=Xt.slice(n,1,n.length);try{oo?co(oo,r,i,oo._dt?oo._dt.env:null):Ba(function(n,t,e){co(oo=n,r,i,t,e),so()},r)}catch(n){try{Yr("sdk","api-error","",n.message+"\n"+n.stack,!0)}catch(n){}}}}var ho=!1,go=(Pt(),0);function mo(n){go&&v(go),ho||(ho=!0,Pt(),n&&n.type,function n(){if(Ae&&!St.KNB&&fo)return vo&&v(vo),void(vo=j(function(){fo--,n()},lo));var s=!0,f=!1,d=function(){var n=ne();n&&(n.q.push=function t(n){try{var e,r=(e=to(n))?e[0]:"";if(Xt.isArray(r))return void Ht(e,function(n){t(n)});"start"===r?(s=!0,f||l(d)):!1===s?e&&d.push(e):po.apply(jt,e)}catch(n){try{Yr("sdk","api-error","",n.stack,!0)}catch(n){}}});for(var t=void 0,e=void 0,r=[],i=[],a=[],o=n&&Xt.isArray(n.q)?n.q:[],u=0,c=o.length;u<c;u++)"config"===(e=o[u][0])?i.push(o[u]):t||"use"!==e?a.push(o[u]):(r.push(o[u]),t=!0);return o=i.concat(r.concat(a))}();function l(n){f||(n&&Xt.each(n,function(n){var t,e=(t=to(n))?t[0]:"";Xt.isArray(e)?Ht(t,function(n){po.apply(jt,n)}):e?po.apply(jt,t):n&&n&&n[0]}),po(function(){so()}),f=!0)}if(0===d.length)Ba(function(n){oo=n,so()});else try{d=Wt(d,function(n){var t;if("config"===((t=to(n))?t[0]:"")){var e=t[1],r=t[2];"autoStart"===e&&!1===r&&(s=!1)}return t}),s&&l(d)}catch(n){}}())}go=j(function(){mo()},3e3),"complete"!==qt.readyState?(Qt.on(qt,"DOMContentLoaded",mo),Qt.on(St,"load",mo)):mo()}();
